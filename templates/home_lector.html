
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inicio - Lector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
    <style>
      body {
        background-color: #0f1218;
        font-family: 'Fira Mono', monospace;
        color: #cfd8dc;
        min-height: 100vh;
        padding-bottom: 4rem;
      }
      h1, h2 {
        color: #00ffea;
        text-transform: uppercase;
        font-weight: 900;
        letter-spacing: 0.15rem;
        text-shadow: 0 0 8px #00ffea;
      }
      h4 {
        color: #a0f0e0;
        margin-bottom: 1.5rem;
      }
      .material-card {
        background: #1a1f2b;
        border-radius: 12px;
        box-shadow: 0 0 10px #00ffea88;
        color: #a0f0e0;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        height: 100%;
        display: flex;
        flex-direction: column;
      }
      .material-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 0 20px #00ffea;
      }
      .material-img {
        border-radius: 12px 12px 0 0;
        height: 180px;
        width: 100%;
        object-fit: cover;
        background-color: #0f1218;
        filter: drop-shadow(0 0 4px #00ffeaaa);
      }
      .material-body {
        padding: 1rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      .material-title {
        font-weight: 700;
        font-size: 1.2rem;
        color: #00ffea;
        margin-bottom: 0.3rem;
      }
      .material-author {
        font-style: italic;
        font-size: 0.9rem;
        margin-bottom: 0.8rem;
        color: #78d9d1;
      }
      .material-status {
        font-weight: 600;
        font-size: 0.85rem;
        padding: 0.2rem 0.5rem;
        border-radius: 10px;
        width: fit-content;
        color: #0f1218;
        background-color: #00ffea;
        align-self: flex-start;
        box-shadow: 0 0 8px #00ffeaaa;
      }
      .btn-primary, .btn-danger {
        font-weight: 700;
        letter-spacing: 0.05rem;
        padding: 0.5rem 1.2rem;
        border-radius: 0.5rem;
        box-shadow: 0 0 12px #00ffea55;
        transition: all 0.3s ease;
      }
      .btn-primary:hover {
        background-color: #00c3b2;
        box-shadow: 0 0 20px #00c3b2;
      }
      .btn-danger {
        background-color: #ff004d;
        box-shadow: 0 0 12px #ff004d99;
        border: none;
        color: white;
      }
      .btn-danger:hover {
        background-color: #d6003e;
        box-shadow: 0 0 20px #d6003e;
      }
      footer {
        text-align: center;
        margin-top: 4rem;
        color: #555;
        font-size: 0.9rem;
      }
      .floating-logo {
        position: fixed;
        top: 15px;
        right: 15px;
        z-index: 1050;
        width: 60px;
        height: 60px;
        cursor: pointer;
        filter: drop-shadow(0 0 8px #00ffea);
        transition: filter 0.3s ease;
      }
      .floating-logo:hover {
        filter: drop-shadow(0 0 15px #00ffea);
      }
      .materiales-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 1.5rem;
        width: 100%;
      }



    </style>
</head>
<body>
  <a href="/" title="Logo Biblioteca" class="floating-logo">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo Biblioteca" style="width:100%; height:100%; border-radius: 50%;">
  </a>

  <div class="container">
    <div class="d-flex justify-content-end mt-3">
      {% if 'usuario_tipo' in session %}
        <a href="{{ url_for('auth.logout') }}" class="btn btn-danger">Cerrar sesión</a>
      {% else %}
        <a href="{{ url_for('usuario.login') }}" class="btn btn-primary">Iniciar sesión</a>
      {% endif %}
    </div>

    <h1 class="mt-4">Bienvenido{% if 'usuario_nombre' in session %} {{ session.usuario_nombre }}{% else %} visitante{% endif %}</h1>
    <!-- Sección Materiales -->

    <a href="{{ url_for('home') }}" class="btn btn-outline-light mb-3">Ver todos los materiales</a>

    <!--BUSQUEDA-->
    <form method="get" class="mb-4 d-flex" role="search">
      {% if request.args.get('tipo') %}
        <input type="hidden" name="tipo" value="{{ request.args.get('tipo') }}">
      {% endif %}
      <input type="text" name="buscar" class="form-control me-2" placeholder="Buscar por título..." value="{{ request.args.get('buscar', '') }}">
      <button class="btn btn-primary" type="submit">Buscar</button>
    </form>


    <h2 class="mt-5">
  <a href="{{ url_for('home', tipo='libro') }}" style="text-decoration: none; color: #00ffea;">
    Libros
  </a>
</h2>

    <div class="materiales-grid">
      {% for m in materiales %}
        {% if m.tipo.lower() == 'libro' %}
          <div class="material-card shadow">
            <img src="{{ url_for('static', filename='pages.jpeg') }}" alt="{{ m.titulo }}" class="material-img" />
            <div class="material-body">
              <div>
                <div class="material-title">{{ m.titulo }}</div>
                <div class="material-author">Autor: {{ m.autor.nombre }}</div>
              </div>
              <div class="material-status">{{ m.estado }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>


    <h2 class="mt-5">
  <a href="{{ url_for('home', tipo='audio') }}" style="text-decoration: none; color: #00ffea;">
    Audios
  </a>
</h2>

    <div class="materiales-grid">
      {% for m in materiales %}
        {% if m.tipo.lower() == 'audio' %}
          <div class="material-card shadow">
            <img src="{{ url_for('static', filename='audio.jpeg') }}" alt="{{ m.titulo }}" class="material-img" />
            <div class="material-body">
              <div>
                <div class="material-title">{{ m.titulo }}</div>
                <div class="material-author">Autor: {{ m.autor.nombre }}</div>
              </div>
              <div class="material-status">{{ m.estado }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <h2 class="mt-5">
  <a href="{{ url_for('home', tipo='video') }}" style="text-decoration: none; color: #00ffea;">
    Videos
  </a>
</h2>

    <div class="materiales-grid">
      {% for m in materiales %}
        {% if m.tipo.lower() == 'video' %}
          <div class="material-card shadow">
            <img src="{{ url_for('static', filename='video.jpeg') }}" alt="{{ m.titulo }}" class="material-img" />
            <div class="material-body">
              <div>
                <div class="material-title">{{ m.titulo }}</div>
                <div class="material-author">Autor: {{ m.autor.nombre }}</div>
              </div>
              <div class="material-status">{{ m.estado }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>


        <!-- Sección Proyectos Académicos -->
    <h2 class="mt-5">
  <a href="{{ url_for('home', tipo='proyecto') }}" style="text-decoration: none; color: #00ffea;">
    Proyectos Académicos
  </a>
</h2>

    <div class="materiales-grid">
      {% for m in materiales %}
        {% if 'proyecto' in m.tipo.lower() or 'tesis' in m.tipo.lower() %}
          <div class="material-card shadow">
            <img src="{{ url_for('static', filename='proyecto.jpeg') }}" alt="{{ m.titulo }}" class="material-img" />
            <div class="material-body">
              <div>
                <div class="material-title">{{ m.titulo }}</div>
                <div class="material-author">Autor: {{ m.autor.nombre }}</div>
              </div>
              <div class="material-status">{{ m.estado }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

  <footer>
    <p>&copy; 2025 Biblioteca Virtual - Todos los derechos reservados</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
